(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-37f7f2c2"],{1276:function(t,e,a){"use strict";var n=a("d784"),l=a("44e7"),i=a("825a"),o=a("1d80"),s=a("4840"),r=a("8aa5"),c=a("50c4"),d=a("14c3"),u=a("9263"),p=a("9f7f"),m=p.UNSUPPORTED_Y,h=[].push,f=Math.min,g=4294967295;n("split",2,(function(t,e,a){var n;return n="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,a){var n=String(o(this)),i=void 0===a?g:a>>>0;if(0===i)return[];if(void 0===t)return[n];if(!l(t))return e.call(n,t,i);var s,r,c,d=[],p=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),m=0,f=new RegExp(t.source,p+"g");while(s=u.call(f,n)){if(r=f.lastIndex,r>m&&(d.push(n.slice(m,s.index)),s.length>1&&s.index<n.length&&h.apply(d,s.slice(1)),c=s[0].length,m=r,d.length>=i))break;f.lastIndex===s.index&&f.lastIndex++}return m===n.length?!c&&f.test("")||d.push(""):d.push(n.slice(m)),d.length>i?d.slice(0,i):d}:"0".split(void 0,0).length?function(t,a){return void 0===t&&0===a?[]:e.call(this,t,a)}:e,[function(e,a){var l=o(this),i=void 0==e?void 0:e[t];return void 0!==i?i.call(e,l,a):n.call(String(l),e,a)},function(t,l){var o=a(n,t,this,l,n!==e);if(o.done)return o.value;var u=i(t),p=String(this),h=s(u,RegExp),y=u.unicode,_=(u.ignoreCase?"i":"")+(u.multiline?"m":"")+(u.unicode?"u":"")+(m?"g":"y"),b=new h(m?"^(?:"+u.source+")":u,_),v=void 0===l?g:l>>>0;if(0===v)return[];if(0===p.length)return null===d(b,p)?[p]:[];var x=0,M=0,O=[];while(M<p.length){b.lastIndex=m?0:M;var w,k=d(b,m?p.slice(M):p);if(null===k||(w=f(c(b.lastIndex+(m?M:0)),p.length))===x)M=r(p,M,y);else{if(O.push(p.slice(x,M)),O.length===v)return O;for(var G=1;G<=k.length-1;G++)if(O.push(k[G]),O.length===v)return O;M=x=w}}return O.push(p.slice(x)),O}]}),m)},"383e":function(t,e,a){"use strict";a("72d5")},"44e7":function(t,e,a){var n=a("861d"),l=a("c6b6"),i=a("b622"),o=i("match");t.exports=function(t){var e;return n(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==l(t))}},"72d5":function(t,e,a){},a15b:function(t,e,a){"use strict";var n=a("23e7"),l=a("44ad"),i=a("fc6a"),o=a("a640"),s=[].join,r=l!=Object,c=o("join",",");n({target:"Array",proto:!0,forced:r||!c},{join:function(t){return s.call(i(this),void 0===t?",":t)}})},d81d:function(t,e,a){"use strict";var n=a("23e7"),l=a("b727").map,i=a("1dde"),o=i("map");n({target:"Array",proto:!0,forced:!o},{map:function(t){return l(this,t,arguments.length>1?arguments[1]:void 0)}})},db93:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"scroll",staticClass:"params"},[a("div",{staticClass:"header"},[a("Crumbs",{attrs:{breadcrumb:t.breadcrumb}}),a("el-alert",{staticStyle:{margin:"20px 0"},attrs:{title:"注意:只允许为第三级分类设置参数",type:"warning","show-icon":"",closable:!1}})],1),a("div",{staticClass:"selectGoods"},[a("span",[t._v("请选择商品分类：")]),a("el-cascader",{attrs:{options:t.goodsList,props:t.goodslists},on:{change:t.handleChange},model:{value:t.goods_cat,callback:function(e){t.goods_cat=e},expression:"goods_cat"}})],1),a("div",{staticClass:"main"},[a("el-tabs",{attrs:{"before-leave":t.beforeTabLeave},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"动态参数",name:"first"}},[a("el-button",{staticStyle:{},attrs:{type:"primary"}},[t._v("设置动态参数")]),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.getGoodsManyAttrVals,border:"",id:"out-table"}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""},nativeOn:{submit:function(t){t.preventDefault()}}},[a("el-form-item",[t._l(e.row.attr_vals,(function(n,l){return a("el-tag",{key:l,staticStyle:{margin:"0 5px"},attrs:{closable:"","disable-transitions":!1},on:{close:function(a){return t.closeGoodsMany(e.row,l)}}},[t._v(" "+t._s(n)+" ")])})),t.inputVisible?a("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small"},nativeOn:{keyup:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.addGoodsMany(e.row)}},model:{value:t.inputValue,callback:function(e){t.inputValue=e},expression:"inputValue"}}):a("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:function(e){t.inputVisible=!0}}},[t._v("+ New Tag")])],2)],1)]}}])}),a("el-table-column",{attrs:{label:"属性名称",prop:"attr_name"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-edit",circle:""},on:{click:function(a){return t.compileOpen(e.row)}}}),a("el-button",{attrs:{size:"small",type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(a){return t.deleteGoodsMany(e.row.attr_id)}}})]}}])})],1)],1),a("el-tab-pane",{attrs:{label:"静态参数",name:"second"}},[a("el-button",{staticStyle:{},attrs:{type:"primary"}},[t._v("设置静态参数")]),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.getGoodsOnlyAttrVals,border:"",id:"out-table"}},[a("el-table-column",{attrs:{label:"属性名称",prop:"attr_name"}}),a("el-table-column",{attrs:{label:"属性值",prop:""}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-edit",circle:""},on:{click:function(a){return t.compileOnlyOpen(e.row)}}}),a("el-button",{attrs:{size:"small",type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(a){return t.deleteGoodsOnly(e.row.attr_id)}}})]}}])})],1)],1)],1),a("el-dialog",{attrs:{title:"修改分类参数",visible:t.compileDialog,width:"600px"},on:{"update:visible":function(e){t.compileDialog=e}}},[a("el-form",{staticClass:"demo-ruleForm",attrs:{model:t.compileManys,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"说明",prop:"username"}},[a("el-input",{attrs:{disabled:"",value:"添加多个以逗号隔开"}})],1),a("el-form-item",{attrs:{label:"分类",prop:"attr_vals"}},[a("el-input",{model:{value:t.compileManys.attr_vals,callback:function(e){t.$set(t.compileManys,"attr_vals",e)},expression:"compileManys.attr_vals"}})],1),a("el-form-item",{attrs:{label:"名称",prop:"attr_name"}},[a("el-input",{model:{value:t.compileManys.attr_name,callback:function(e){t.$set(t.compileManys,"attr_name",e)},expression:"compileManys.attr_name"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.compileDialog=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.compileMany()}}},[t._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"修改分类参数",visible:t.compileDialogs,width:"600px"},on:{"update:visible":function(e){t.compileDialogs=e}}},[a("el-form",{staticClass:"demo-ruleForm",attrs:{model:t.compileOnlys,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"名称",prop:"attr_name"}},[a("el-input",{model:{value:t.compileOnlys.attr_name,callback:function(e){t.$set(t.compileOnlys,"attr_name",e)},expression:"compileOnlys.attr_name"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.compileDialogs=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.compileOnly()}}},[t._v("确 定")])],1)],1)],1)])},l=[],i=(a("d81d"),a("ac1f"),a("1276"),a("a434"),a("a15b"),{data:function(){return{breadcrumb:[{title:"首页",name:"Home"},{title:"商品管理"},{title:"分类参数"}],goodsList:[],goodslists:{label:"cat_name",value:"cat_id",children:"children"},goods_cat:[],activeName:"first",getGoodsManyAttrVals:[],getGoodsOnlyAttrVals:[],inputVisible:!1,inputValue:"",compileManys:{attr_sel:"",attr_vals:"",attr_name:""},compileOnlys:{attr_sel:"",attr_vals:"",attr_name:""},compileId:"",compileDialog:!1,compileDialogs:!1,manysId:"",onlyId:""}},methods:{exportToExcel:function(){var t=document.getElementById("out-table"),e=this.$XLSX.utils.table_to_book(t),a=this.$XLSX.write(e,{bookType:"xlsx",bookSST:!0,type:"array"});try{this.$FileSaver.saveAs(new Blob([a],{type:"application/octet-stream"}),"sheetjs.xlsx")}catch(n){"undefined"!==typeof console&&console.log(n,a)}return a},categories:function(){var t=this;this.$apis.categories({type:3}).then((function(e){t.goodsList=e.data}))},handleChange:function(){var t=this;this.getGoodsManyAttrVals=[],3!==this.goods_cat.length?this.goods_cat=[]:(this.$apis.getGoodsMany(this.goods_cat[this.goods_cat.length-1]).then((function(e){t.getGoodsManyAttrVals=e.data,t.getGoodsManyAttrVals.map((function(t){t.attr_vals=t.attr_vals.split(",")}))})),this.$apis.getGoodsOnly(this.goods_cat[this.goods_cat.length-1]).then((function(e){t.getGoodsOnlyAttrVals=e.data})))},beforeTabLeave:function(t,e){if("first"===e&&3!==this.goods_cat.length)return this.$message({type:"warning",message:"请选择三级分类"}),!1},closeGoodsMany:function(t,e){t.attr_vals.splice(e,1),this.$apis.deleteMany(this.goods_cat[this.goods_cat.length-1],t.attr_id,{attr_name:t.attr_name,attr_sel:t.attr_sel,attr_vals:t.attr_vals.join(",")})},addGoodsMany:function(t){t.attr_vals.push(this.inputValue),this.$apis.addGoodsMany(this.goods_cat[this.goods_cat.length-1],t.attr_id,{attr_name:t.attr_name,attr_sel:"many",attr_vals:t.attr_vals.join(",")}),this.inputVisible=!1,this.inputValue=""},compileOpen:function(t){this.compileDialog=!0,this.compileManys.attr_name=t.attr_name,this.compileManys.attr_vals=String(t.attr_vals),this.compileManys.attr_sel=t.attr_sel,this.manysId=t.attr_id},compileMany:function(){var t=this;this.$apis.addGoodsMany(this.goods_cat[this.goods_cat.length-1],this.manysId,this.compileManys).then((function(e){t.getGoodsManyAttrVals.map((function(t){t.attr_id===e.data.attr_id&&(t.attr_name=e.data.attr_name,t.attr_vals=e.data.attr_vals.split(","))}))})),this.compileDialog=!1},compileOnlyOpen:function(t){this.compileDialogs=!0,this.compileOnlys.attr_name=t.attr_name,this.compileOnlys.attr_vals=t.attr_vals,this.compileOnlys.attr_sel=t.attr_sel,this.onlyId=t.attr_id},compileOnly:function(){var t=this;this.$apis.addGoodsOnly(this.goods_cat[this.goods_cat.length-1],this.onlyId,this.compileOnlys).then((function(e){t.getGoodsOnlyAttrVals.map((function(t){t.attr_id===e.data.attr_id&&(t.attr_name=e.data.attr_name)}))})),this.compileDialogs=!1},deleteGoodsMany:function(t){var e=this;this.$confirm("此操作将永久删除数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$apis.deleteGoodsMany(e.goods_cat[e.goods_cat.length-1],t).then((function(a){e.getGoodsManyAttrVals.map((function(a,n){a.attr_id===t&&e.getGoodsManyAttrVals.splice(n,1)}))}))}))["catch"]((function(){e.$message({type:"info",message:"已取消删除"})}))},deleteGoodsOnly:function(t){var e=this;this.$confirm("此操作将永久删除数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$apis.deleteGoodsOnly(e.goods_cat[e.goods_cat.length-1],t).then((function(a){e.getGoodsOnlyAttrVals.map((function(a,n){a.attr_id===t&&e.getGoodsOnlyAttrVals.splice(n,1)}))}))}))["catch"]((function(){e.$message({type:"info",message:"已取消删除"})}))}},mounted:function(){this.categories()}}),o=i,s=(a("383e"),a("2877")),r=Object(s["a"])(o,n,l,!1,null,"26e34ec8",null);e["default"]=r.exports}}]);